<!-- PHP code to establish connection with the localserver -->
<?php

// Username is root
// Riley Walsh
// lab_5
// 10/07/2022
$user = 'root';
$password = '';

// Database name is UserDatabase
$database = 'career';

// Server is localhost with
// port number 3306
$servername='localhost:3306';
$mysqli = new mysqli($servername, $user,
				$password, $database);

// Checking for connections
if ($mysqli->connect_error) {
	die('Connect Error (' .
	$mysqli->connect_errno . ') '.
	$mysqli->connect_error);
}


// SQL query to select data from database
$sql = " SELECT * FROM users";
$result = $mysqli->query($sql);

$mysqli->close();

?>

<!DOCTYPE HTML>

<html>
    <head>
        <title>Org Chart</title>
        <link rel="stylesheet" href="demo.css"/>
        <link rel="stylesheet" href="jquery/jquery.orgchart.css"/>
        <style>
        span.title {
            font-weight: normal;
            font-style: italic;
            color: #404040;
        }
        </style>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="jquery/jquery.orgchart.js"></script>
        <script>
        $(function() {
            $("#organisation").orgChart({container: $("#main")});
        });
        </script>
    </head>

    <body>

<div id="content">
        
            <h1>JQuery/CSS Organisation Chart</h1>
        
            <div id="main">
            </div>

        <div id="left">
		
		<?php
				// LOOP TILL END OF DATA
				while($rows=$result->fetch_assoc())
				{
<?php echo $rows['Classes'];?>

			?>

            <ul id="organisation">
                <li class="company"><em><a href="http://www.capricasoftware.co.uk">Caprica Software</a></em>
                    <ul>
                        <li>Mark Lee<br/><span class='title'>Overlord</span>
                        <ul>
                            <li><br/>
					
                                <ul>
                                    <li>Richard Toole<br/><span class='title'>Minion</span></li>
                                    <li>Noah Scruples<br/><span class='title'>Minion</span></li>
                                </ul>
                            </li>
                            <li>Marketing
                                <ul>
                                    <li>Liza Cumming<br/><span class='title'>Minion</span></li>
                                    <li>Lotte<br/>Fibze<br/><span class='title'>Minion</span></li>
                                </ul>
                            </li>
                            <li>Human Resources<br/>
                                <ul>
                                    <li>Misty Nethers<br/><span class='title'>Minion</span></li>
                                </ul>
                            </li>
                            <li>Legal<br/>
                                <ul>
                                    <li>Rob Newhouse<br/><span class='title'>Minion</span></li>
                                </ul>
                            </li>
                            <li>Public Relations<br/>
                                <ul>
                                    <li>Tracy Chavington<br/><span class='title'>Minion</span></li>
                                </ul>
                            </li>
                        </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        <?php
				}
			?>
        </div>

        
            
            
               
            </div>

        </div>
            
  </body>

</html>
